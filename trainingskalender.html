<!DOCTYPE html>
<html>

<head>
	<title>GKK Sport - Trainingskalender</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
	<link rel="icon" sizes="192x192" href="icon.png">
	<style>
		/* Remove the navbar's default margin-bottom and rounded borders */

		@media (min-width: 767px) {
			ul.nav li.dropdown:hover>ul.dropdown-menu {
				display: block;
			}
		}

		.btn {
			margin-bottom: 5px;
		}

		.navbar {
			margin-bottom: 0;
			border-radius: 0;
		}

		/* Set height of the grid so .sidenav can be 100% (adjust as needed) */

		.row.content {
			height: 450px
		}

		/* Set gray background color and 100% height */

		.sidenav {
			padding-top: 20px;
			background-color: #f1f1f1;
			height: 100%;
		}

		/* Set black background color, white text and some padding */

		.navbar-brand img {
			height: 40px;
		}

		.navbar-brand {
			padding-bottom: 3px;
			padding-top: 6px;
		}

		footer {
			background-color: #555;
			color: white;
			padding: 15px;
		}

		.table {
			margin-bottom: 0px !important;
		}

		.loop {
			background-color: #d9d2e9;
		}

		.loop:hover {
			background-color: #c3bdd1;
		}

		.zwem {
			background-color: #cfe2f3;
		}

		.zwem:hover {
			background-color: #bacbda;
		}

		.fiets {
			background-color: #ead1dc;
		}

		.fiets:hover {
			background-color: #d2bcc6;
		}

		.footer {
			position: relative;
			margin-top: -150px;
			/* negative value of footer height */
			height: 150px;
			clear: both;
			padding-top: 20px;
		}

		.form-inline .form-control {
			display: inline-block !important;
			width: auto !important
		}

		body {
			padding-bottom: 120px;

		}

		/* On small screens, set height to 'auto' for sidenav and grid */

		@media screen and (max-width: 767px) {
			.sidenav {
				height: auto;
				padding: 15px;
			}
			.row.content {
				height: auto;
			}
		}
	</style>
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-119797754-1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];

		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());

		gtag('config', 'UA-119797754-1');
	</script>
	<script>
		$(function() {
			$("#menu").load("menu.html");
		});
	</script>
</head>

<body>

	<nav class="navbar navbar-inverse">
		<div class="container-fluid">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
				<a class="navbar-brand" href="index.html"><img src="GKK.png"></a>
			</div>
			<div id="menu">
			</div>
		</div>
	</nav>

	<div class="container-fluid text-center">
		<div id="alert" style="display:none;">
			<br>
			<div class="alert alert-danger">
				<strong>Geen juiste link!</strong> Geef een correcte link naar je trainingskalender op Google Drive in. Deze moet gepubliceerd zijn op het net en de deelbare link moet hieronder ingevuld worden.
			</div>
		</div>
		<div class="row content" id="panels" style="display:none;">
			<br>
			<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
				<div class="panel panel-primary">
					<div id="paneltitel0" class="panel-heading"></div>
					<div id="panelinhoud0" class="panel-body"></div>
				</div>
			</div>
			<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
				<div class="panel panel-default">
					<div id="paneltitel1" class="panel-heading"></div>
					<div id="panelinhoud1" class="panel-body"></div>
				</div>
			</div>
			<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
				<div class="panel panel-default">
					<div id="paneltitel2" class="panel-heading"></div>
					<div id="panelinhoud2" class="panel-body"></div>
				</div>
			</div>
			<div class='clearfix visible-sm-block visible-md-block visible-lg-block'></div>
			<div id="meer" style="display:none;">
				<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
					<div class="panel panel-default">
						<div id="paneltitel3" class="panel-heading"></div>
						<div id="panelinhoud3" class="panel-body"></div>
					</div>
				</div>
				<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
					<div class="panel panel-default">
						<div id="paneltitel4" class="panel-heading"></div>
						<div id="panelinhoud4" class="panel-body"></div>
					</div>
				</div>
				<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
					<div class="panel panel-default">
						<div id="paneltitel5" class="panel-heading"></div>
						<div id="panelinhoud5" class="panel-body"></div>
					</div>
				</div>
				<div class='clearfix visible-sm-block visible-md-block visible-lg-block'></div>
				<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
					<div class="panel panel-default">
						<div id="paneltitel6" class="panel-heading"></div>
						<div id="panelinhoud6" class="panel-body"></div>
					</div>
				</div>
				<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
					<div class="panel panel-default">
						<div id="paneltitel7" class="panel-heading"></div>
						<div id="panelinhoud7" class="panel-body"></div>
					</div>
				</div>
				<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
					<div class="panel panel-default">
						<div id="paneltitel8" class="panel-heading"></div>
						<div id="panelinhoud8" class="panel-body"></div>
					</div>
				</div>
			</div>
			<button id="knop" class="btn btn-default" onclick="btn();" style="margin-bottom:20px">Toon nog 6 weken</button>
		</div>
	</div>
	<div class="navbar navbar-inverse navbar-fixed-bottom">
		<div class="row">
			<div class="col-md-2 col-lg-2 col-sm-1 col-xs-1"></div>
			<div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">
				<center>
					<form style="margin-top:5px;">
						<div class="input-group">
							<div class="input-group-addon"><i class="fab fa-google-drive"></i></div>
							<input autocomplete="off" type="url" class="form-control" id="gsheetlink" placeholder="Google sheet link">
							<span class="input-group-btn">
				          <button onclick="gsheetophaal();" class="btn btn-primary" style="margin-bottom:0px!important;"><i class="fas fa-check"></i></button>
				        </span>
						</div>
					</form>
				</center>
			</div>
			<div class="col-md-2 col-lg-2 col-sm-1 col-xs-1"></div>
		</div>
	</div>

	<script src='https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.5.1/tabletop.min.js'></script>
	<script src='https://momentjs.com/downloads/moment-with-locales.js'></script>
	<script>
		moment.updateLocale('en', {
			week: {
				dow: 1,
			},
		});
		moment.updateLocale('nl', {
			week: {
				dow: 1,
			},
		});

		if (localStorage.getItem('gsheet') != "" && localStorage.getItem('gsheet') != null) {
			var publicSpreadsheetUrl2 = localStorage.getItem('gsheet');
			document.getElementById("gsheetlink").value = publicSpreadsheetUrl2;
			init();
			console.log("test");
		} else {
			$("#alert").show();
		}

		function gsheetophaal() {
			var gsheetlink = $("#gsheetlink").val();
			localStorage.setItem('gsheet', gsheetlink);
			var publicSpreadsheetUrl2 = localStorage.getItem('gsheet');
			init();
		}


		var weeknumber = moment().week();
		var publicSpreadsheetUrl = 'https://docs.google.com/spreadsheets/d/1iDjN5lh4ZwjMZzrVT2ixNdE5tUXnPmhDzF1Fasg8Xek/edit?usp=sharing'

		function init() {
			Tabletop.init({
				key: publicSpreadsheetUrl2,
				callback: showInfo,
				simpleSheet: true
			})
		}

		function showInfo(data, tabletop) {
			$("#panels").show();
			console.log(data[weeknumber]);
			for (i = 0; i < 9; i++) {
				var wn = weeknumber + i;
				document.getElementById("paneltitel" + i).innerHTML = "<strong>Week " + wn + "</strong> (die start op " + data[wn].Start + ")";
				document.getElementById("panelinhoud" + i).innerHTML = "<table class='table table-hover table-condensed table-bordered'>" + "<tr id='" + wn + "A'><td style='width:5%;'>M</td><td>" + leeg(data[wn].MA) + "</td></tr><tr id='" + wn +
					"B'><td style='width:5%;'>D</td><td>" + leeg(data[
						wn].DI) +
					"</td></tr><tr><td style='width:5%;'>W</td><td>" + leeg(
						data[wn].WO) +
					"</td></tr><tr><td style='width:5%;'>D</td><td>" + leeg(data[wn].DO) + "</td></tr><tr><td style='width:5%;'>V</td><td>" + leeg(data[wn].VR) + "</td></tr><tr><td style='width:5%;'>Z</td><td>" + leeg(data[wn].ZA) +
					"</td></tr><tr><td style='width:5%;'>Z</td><td>" + leeg(data[wn].ZO) + "</td></tr>" + "</table>";

			}

			// Geeft kleur aan de rijen
			var trs = document.getElementsByTagName('td');
			for (var i = 0, len = trs.length; i < len; ++i) {
				if (trs[i].innerHTML.indexOf("[Z]") !== -1) {
					$(trs[i]).addClass('zwem');
				}
				if (trs[i].innerHTML.indexOf("[L]") !== -1) {
					$(trs[i]).addClass('loop');
				}
				if (trs[i].innerHTML.indexOf("[F]") !== -1) {
					$(trs[i]).addClass('fiets');
				}
				if (trs[i].innerHTML.indexOf("[W]") !== -1) {
					$(trs[i]).addClass('danger');
				}
				if (trs[i].innerHTML.indexOf("[C]") !== -1) {
					$(trs[i]).addClass('active');
				}
			}

			// Vervangt alle code uit de google sheet met een gepast icoon
			$("body").children().each(function() {
				$(this).html($(this).html().replace(/\[L\]/g, "<i class='fas fa-walking'></i>"));
				$(this).html($(this).html().replace(/\[Z\]/g, "<i class='fas fa-swimmer'></i>"));
				$(this).html($(this).html().replace(/\[F\]/g, "<i class='fas fa-bicycle'></i>"));
				$(this).html($(this).html().replace(/\[C\]/g, "<i class='fas fa-child'></i>"));
				$(this).html($(this).html().replace(/\[W\]/g, "<i class='fas fa-exclamation-circle'></i>"));
				$(this).html($(this).html().replace(/\[X\]/g, "<i class='fas fa-check-square'></li>"));
			});


			document.getElementById("gsheetlink").value = publicSpreadsheetUrl2;
		}


		function leeg(string) {
			var legedag = string;
			if (legedag === "" || legedag === null) {
				return "-";
			} else {
				return legedag;
			}
		}

		function btn() {
			$('#knop').hide();
			$('#meer').show();
		}
	</script>
	<!-- GKK Service Worker -->
	<!--<script>
	if ('serviceWorker' in navigator) {
		navigator.serviceWorker.register('service-worker.js');
	}
</script>-->
</body>


</html>