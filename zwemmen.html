<!DOCTYPE html>
<html>

<head>
	<title>GKK Sport - Zwemkalender</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link rel="icon" sizes="192x192" href="icon.png">
	<style>
		/* Remove the navbar's default margin-bottom and rounded borders */

		@media (min-width: 767px) {
			ul.nav li.dropdown:hover>ul.dropdown-menu {
				display: block;
			}
		}

		.btn {
			margin-bottom: 5px;
		}

		.navbar {
			margin-bottom: 0;
			border-radius: 0;
		}

		/* Set height of the grid so .sidenav can be 100% (adjust as needed) */

		.row.content {
			height: 450px
		}

		/* Set gray background color and 100% height */

		.sidenav {
			padding-top: 20px;
			background-color: #f1f1f1;
			height: 100%;
		}

		/* Set black background color, white text and some padding */

		.navbar-brand img {
			height: 40px;
		}

		.navbar-brand {
			padding-bottom: 3px;
			padding-top: 6px;
		}

		footer {
			background-color: #555;
			color: white;
			padding: 15px;
		}

		/* On small screens, set height to 'auto' for sidenav and grid */

		@media screen and (max-width: 767px) {
			.sidenav {
				height: auto;
				padding: 15px;
			}
			.row.content {
				height: auto;
			}
		}

		.item-list>h3 {
			display: none;
		}

		.item-list {
			padding-left: 0;
		}

		.item-list>ul {
			list-style-type: none;
			padding: 0;
			margin: 0;
		}

		#loader {
			margin-top: 40px;
			margin-bottom: 60px;
		}
	</style>
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-119797754-1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];

		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());

		gtag('config', 'UA-119797754-1');
	</script>
	<script>
		$(function() {
			$("#menu").load("menu.html");
		});
	</script>
</head>

<body>

	<nav class="navbar navbar-inverse">
		<div class="container-fluid">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
				<a class="navbar-brand" href="index.html"><img src="GKK.png"></a>
			</div>
			<div id="menu">
			</div>
		</div>
	</nav>

	<div class="container-fluid text-center">
		<div class="row content">
			<div class="col-sm-12">
				<div id="kalender">
					<br />
					<form class="form-inline">
						<div class="form-group">
							<input name="datum" type="date" id="zwemkaldatum" class="form-control" style="margin-bottom: 5px">
							<button type='button' class="btn btn-primary" style="margin-bottom: 5px" onclick="klik();"><i class="far fa-calendar-alt" aria-hidden="true"></i> Andere datum</button>
						</div>
					</form>
					<br>
					<i class="fas fa-spinner fa-7x fa-spin" id="loader"></i>
					<div class="row" id="zwemkal">

					</div>
					<div class="alert alert-info text-center" role="alert">
						<p>Vul een andere datum in en druk op de knop om de openingsuren te krijgen voor een andere dag! Momenteel toont hij de openingsuren voor <strong><span id="datum"></span></strong></p>
					</div>
				</div>
				<br>
				<h4>Ter controle</h4>
				<p>
					<a class="btn btn-danger" href="https://stad.gent/sport" role="button">Alle openingsuren van zwembaden voor VANDAAG</a>
					<a class="btn btn-default" href="https://www.ugent.be/student/nl/meer-dan-studeren/sport/openingsuren" role="button">Openingsuren GUSB</a>
					<a class="btn btn-default" href="https://stad.gent/sport2/waar-kan-ik-sporten/sr-sportbad-rozebroeken" role="button">Openingsuren Rozebroeken</a>
					<a class="btn btn-default" href="https://stad.gent/sport2/waar-kan-ik-sporten/zwembad-strop" role="button">Openingsuren Strop</a>
				</p>
			</div>
		</div>
	</div>
	<script src='https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.5.1/tabletop.min.js'></script>
	<script>
		$(document).ready(function() {
			document.getElementById('zwemkaldatum').valueAsDate = new Date();
			$("#loader").hide();
			for (i = 1; i < 5; i++) {
				document.getElementById("zwemkal").innerHTML += "<div class= 'col-lg-3 col-lg-offset-0 col-md-6 col-md-offset-0 col-sm-10 col-sm-offset-1' id='zwemkal" + [i] + "'></div>";
				if (i === 2) {
					document.getElementById("zwemkal").innerHTML += "<div class='clearfix visible-sm-block visible-md-block'></div>"
				}
			}
			klik();
			init();
		})



		function klik() {
			$("#loader").show();
			var datum = document.getElementById("zwemkaldatum").value;
			document.getElementById("zwemkal1").innerHTML = "";
			document.getElementById("zwemkal2").innerHTML = "";
			document.getElementById("zwemkal3").innerHTML = "";


			// GUSB
			$.ajax({
				url: "https://jsonp.afeld.me/?url=http%3A%2F%2Fstad.gent%2Fsport2%2Fplace%2Fajax%2Fopeninghours%2F56%2F" + datum,
				type: "GET",
				dataType: "jsonp",
				success: function(data) {
					console.log(data.output);
					document.getElementById("zwemkal1").innerHTML = "<div class='panel panel-primary'><div class='panel-heading'><h2 class='panel-title'>GUSB</h2></div><div class='panel-body'>" + data.output + "</div></div>";
					$("#loader").hide();
					// and other stuff i do with the data i get
				},
				xhrFields: {
					withCredentials: false
				}
			})

			// LAGO
			$.ajax({
				url: "https://jsonp.afeld.me/?url=http%3A%2F%2Fstad.gent%2Fsport2%2Fplace%2Fajax%2Fopeninghours%2F5%2F" + datum,
				type: "GET",
				dataType: "jsonp",
				success: function(data) {
					console.log(data.output);
					document.getElementById("zwemkal2").innerHTML = "<div class='panel panel-primary'><div class='panel-heading'><h2 class='panel-title'>LAGO</h2></div><div class='panel-body'>" + data.output + "</div></div>";
					$("#loader").hide(); // and other stuff i do with the data i get
				},
				xhrFields: {
					withCredentials: false
				}
			})

			// STROP
			$.ajax({
				url: "https://jsonp.afeld.me/?url=http%3A%2F%2Fstad.gent%2Fsport2%2Fplace%2Fajax%2Fopeninghours%2F19%2F" + datum,
				type: "GET",
				dataType: "jsonp",
				success: function(data) {
					console.log(data.output);
					document.getElementById("zwemkal3").innerHTML = "<div class='panel panel-primary'><div class='panel-heading'><h2 class='panel-title'>STROP</h2></div><div class='panel-body'>" + data.output + "</div></div>";
					$("#loader").hide();
				},
				xhrFields: {
					withCredentials: false
				}
			})

			function convertDate(dateString) {
				var p = dateString.split(/\D/g)
				return [p[2], p[1], p[0]].join("/")
			}


			$("#datum").text(convertDate(datum));

		}

		var publicSpreadsheetUrl = 'https://docs.google.com/spreadsheets/d/1UACXD_VaVy24L5JsIuE2Qn8-l5DKYAAlxi8V5m_B5zI/edit?usp=sharing';

		function init() {
			Tabletop.init({
				key: publicSpreadsheetUrl,
				callback: showInfo,
				simpleSheet: true
			})
		}

		function showInfo(data, tabletop) {
			document.getElementById("zwemkal4").innerHTML += "<div class='panel panel-primary'><div class='panel-heading'><h2 class='panel-title'>BLAARMEERSEN</h2></div><div class='panel-body'><p>Laatste meting: " + data[0].Datum + "<br>Kwaliteit: " + data[
					0].Kwaliteitsniveau +
				"</p><p style='margin: 0px'>Watertemperatuur: " + data[0].Temperatuur + " Â°C</p></div></div>";
			console.log(data);

		}
	</script>
	<!-- GKK Service Worker -->
	<!--<script>
	if ('serviceWorker' in navigator) {
		navigator.serviceWorker.register('service-worker.js');
	}
</script>-->
</body>

</html>